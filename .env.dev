# ============================================================
# DEVELOPMENT ENVIRONMENT
# ============================================================
# Profile: dev (includes postgres + pgAdmin + hot reload)
# Usage: docker compose --profile dev --env-file .env.dev up -d
# ============================================================

# ==================== ENVIRONMENT ====================
APP_ENV=development
DEBUG=True

# ==================== DOCKER CONFIGURATION ====================
# Use development Dockerfiles with hot reload support
API_DOCKERFILE=Dockerfile.dev
FRONTEND_DOCKERFILE=Dockerfile.dev

# Port configuration
API_PORT=8000
FRONTEND_PORT=5173
FRONTEND_INTERNAL_PORT=5173

# Volume mode: rw (read-write) for hot reload
VOLUME_MODE=rw

# Restart policy for development
RESTART_POLICY=unless-stopped

# ==================== DATABASE (DEV) ====================
POSTGRES_USER=plutusgrip_user
POSTGRES_PASSWORD=plutusgrip_password
POSTGRES_DB=plutusgrip_db

# Database connection URL (uses docker postgres service)
DATABASE_URL=postgresql://plutusgrip_user:plutusgrip_password@postgres:5432/plutusgrip_db

# ==================== API CONFIGURATION ====================
SECRET_KEY=dev-super-secret-key-change-this-in-production
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30

# CORS - Allow local development hosts
ALLOWED_ORIGINS=http://localhost:5173,http://localhost:3000,http://localhost:8000,http://127.0.0.1:5173,http://127.0.0.1:3000,http://127.0.0.1:8000

# Database Pool - Dev settings (smaller pool for development)
DB_POOL_SIZE=5
DB_MAX_OVERFLOW=10
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600

# Logging
LOG_LEVEL=DEBUG

# ==================== FRONTEND ====================
# API URL for frontend (points to local API)
VITE_API_URL=http://localhost:8000/api

# ==================== PGADMIN ====================
# Access pgAdmin at http://localhost:5050
PGADMIN_EMAIL=admin@plutusgrip.com
PGADMIN_PASSWORD=admin123

# ==================== RESOURCE LIMITS (DEV - RELAXED) ====================
# More generous limits for development
API_CPU_LIMIT=2
API_MEMORY_LIMIT=2G
API_CPU_RESERVATION=0.5
API_MEMORY_RESERVATION=512M

FRONTEND_CPU_LIMIT=1
FRONTEND_MEMORY_LIMIT=1G
FRONTEND_CPU_RESERVATION=0.25
FRONTEND_MEMORY_RESERVATION=256M
