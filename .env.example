# ============================================================
# PLUTUSGRIP ENVIRONMENT CONFIGURATION TEMPLATE
# ============================================================
# Copy this file to .env and configure for your environment
# For development: Use values from .env.dev
# For production: Use values from .env.prod and change all secrets
# ============================================================

# ==================== ENVIRONMENT ====================
# Options: development, production
APP_ENV=development
DEBUG=True

# ==================== DOCKER CONFIGURATION ====================
# Dockerfiles to use for building images
# Development: Dockerfile.dev (with hot reload)
# Production: Dockerfile (optimized multi-stage build)
API_DOCKERFILE=Dockerfile.dev
FRONTEND_DOCKERFILE=Dockerfile.dev

# API Port (exposed to host)
API_PORT=8000

# Frontend ports
# Development: 5173 (Vite dev server)
# Production: 3000 (Nginx serving built assets)
FRONTEND_PORT=5173
FRONTEND_INTERNAL_PORT=5173

# Volume mount mode
# Development: rw (read-write for hot reload)
# Production: ro (read-only) or omit volumes
VOLUME_MODE=rw

# Container restart policy
# Development: unless-stopped
# Production: always
RESTART_POLICY=unless-stopped

# ==================== DATABASE (DEV ONLY) ====================
# These are used only in development when postgres container is running
# In production, use external database via DATABASE_URL
POSTGRES_USER=plutusgrip_user
POSTGRES_PASSWORD=plutusgrip_password
POSTGRES_DB=plutusgrip_db

# ==================== DATABASE CONNECTION ====================
# Development: Uses docker postgres service (postgres:5432)
# Production: Must point to external PostgreSQL database
# Format: postgresql://user:password@host:port/database
DATABASE_URL=postgresql://plutusgrip_user:plutusgrip_password@postgres:5432/plutusgrip_db

# ==================== API CONFIGURATION ====================
# SECRET_KEY: Used for JWT token signing
# CRITICAL: Generate a new secure key for production using:
#   python -c "import secrets; print(secrets.token_urlsafe(32))"
SECRET_KEY=dev-super-secret-key-change-this-in-production

# JWT Algorithm (HS256 recommended)
ALGORITHM=HS256

# Token expiration time in minutes
# Development: 30 minutes
# Production: 60 minutes (or adjust based on security requirements)
ACCESS_TOKEN_EXPIRE_MINUTES=30

# CORS - Comma-separated list of allowed origins
# Development: Include localhost with different ports
# Production: Include only your actual domain(s)
# Example: https://yourdomain.com,https://www.yourdomain.com
ALLOWED_ORIGINS=http://localhost:5173,http://localhost:3000,http://localhost:8000

# ==================== DATABASE POOL CONFIGURATION ====================
# Number of connections to maintain in the pool
# Development: 5 (small pool)
# Production: 20 (larger pool for better concurrency)
DB_POOL_SIZE=5

# Maximum overflow connections beyond pool_size
# Development: 10
# Production: 30
DB_MAX_OVERFLOW=10

# Timeout for getting a connection from the pool (seconds)
# Development: 30
# Production: 60
DB_POOL_TIMEOUT=30

# Time after which connections are recycled (seconds)
# Prevents stale connections, set to 3600 (1 hour)
DB_POOL_RECYCLE=3600

# ==================== LOGGING ====================
# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
# Development: DEBUG (verbose)
# Production: INFO (balanced) or WARNING (minimal)
LOG_LEVEL=DEBUG

# ==================== FRONTEND CONFIGURATION ====================
# API endpoint URL for frontend to connect to
# Development: http://localhost:8000 (direct API access)
# Production: https://yourdomain.com/api (through Nginx)
VITE_API_URL=http://localhost:8000

# ==================== PGADMIN (DEV ONLY) ====================
# pgAdmin is only included in development profile
# Access pgAdmin at http://localhost:5050
PGADMIN_EMAIL=admin@plutusgrip.com
PGADMIN_PASSWORD=admin123

# ==================== RESOURCE LIMITS ====================
# Docker container resource limits (CPU cores and memory)
# Adjust based on your server capacity

# API Resources
# Development: More generous limits
# Production: Strict limits for stability
API_CPU_LIMIT=1
API_MEMORY_LIMIT=1G
API_CPU_RESERVATION=0.5
API_MEMORY_RESERVATION=512M

# Frontend Resources
FRONTEND_CPU_LIMIT=0.5
FRONTEND_MEMORY_LIMIT=512M
FRONTEND_CPU_RESERVATION=0.25
FRONTEND_MEMORY_RESERVATION=256M

# ==================== USAGE EXAMPLES ====================
#
# Development:
#   1. Copy this file: cp .env.example .env
#   2. Or use predefined: cp .env.dev .env
#   3. Start services: docker compose --profile dev up -d
#   4. Access:
#      - Frontend: http://localhost:5173
#      - API: http://localhost:8000
#      - API Docs: http://localhost:8000/docs
#      - pgAdmin: http://localhost:5050
#      - Database: localhost:5432
#
# Production:
#   1. Copy this file: cp .env.example .env.prod
#   2. Update all CRITICAL values:
#      - DATABASE_URL (point to external PostgreSQL)
#      - SECRET_KEY (generate new secure key)
#      - ALLOWED_ORIGINS (your domain)
#      - VITE_API_URL (your domain/api)
#   3. Set production values:
#      - API_DOCKERFILE=Dockerfile
#      - FRONTEND_DOCKERFILE=Dockerfile
#      - APP_ENV=production
#      - DEBUG=False
#      - RESTART_POLICY=always
#   4. Start services: docker compose --profile prod --env-file .env.prod up -d
#   5. Access:
#      - Application: http://yourdomain.com (or http://localhost if testing locally)
#      - API: http://yourdomain.com/api
#      - Docs: http://yourdomain.com/docs
#
# ==================== IMPORTANT NOTES ====================
# - Never commit .env file to git (add to .gitignore)
# - Always change default passwords in production
# - Use strong, randomly generated SECRET_KEY in production
# - Configure SSL/TLS certificates for production HTTPS
# - Set up external database backup strategy
# - Monitor resource usage and adjust limits accordingly
# - Review security best practices before production deployment
